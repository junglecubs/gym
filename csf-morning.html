<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Cubs Sports Fest ‚Äî Registration</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    /* --- BRAND COLORS & VARS --- */
    :root {
      --jc-yellow: #f9ca2b;
      --jc-green:  #287844;
      --jc-green-light: #3b9e58;
      --jc-red:    #c72e31;
    }

    /* --- GLOBAL RESET --- */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    html {
      background: linear-gradient(135deg, #a8e063 0%, #56ab2f 100%);
      min-height: 100%; height: 100%;
    }

    body {
      font-family: 'Nunito', sans-serif;
      line-height: 1.6; 
      min-height: 100vh;
      min-height: -webkit-fill-available; 
      display: flex; align-items: center; justify-content: center; 
      padding: 20px; color: #333; position: relative; overflow-x: hidden; 
      background: transparent; 
    }

    /* =========================================
       üèÉ RUNNING CHARACTER LOADER (R to L)
       ========================================= */
    #loader {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: #ffffff; z-index: 9999; 
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      transition: opacity 0.5s ease; overflow: hidden; 
    }
    
    .loader-track { width: 100%; height: 150px; position: relative; overflow: hidden; margin-bottom: 10px; }
    .running-char {
      width: 120px; position: absolute; top: 20px; left: 100%; 
      animation: runLeft 5s linear infinite, bob 0.4s ease-in-out infinite alternate;
    }
    .loading-text {
      color: var(--jc-green); font-weight: 800; font-size: 1.4rem; letter-spacing: 1px;
      text-transform: uppercase; animation: pulse 1s infinite;
    }
    @keyframes runLeft { 0% { left: 100%; } 100% { left: -150px; } }
    @keyframes bob { from { transform: scaleX(-1) translateY(0); } to { transform: scaleX(-1) translateY(-10px); } }
    @keyframes pulse { 0% { opacity: 0.6; } 100% { opacity: 1; } }

    /* =========================================
       ü¶Å ANIMATED CHARACTERS (FLOATING ON TOP) ü¶Å
       ========================================= */
    .jungle-scene {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      z-index: 50; pointer-events: none; overflow: hidden;
    }

    .char {
      position: absolute; opacity: 1; 
      filter: drop-shadow(0 10px 15px rgba(0,0,0,0.3));
      transition: all 0.3s ease; transform: translateZ(0); 
    }

    /* --- DESKTOP POSITIONS (ALL 4 CORNERS) --- */
    
    /* 1. Top Left */
    .c1 { width: 280px; top: 10%; left: 2%; animation: float 6s ease-in-out infinite; }
    
    /* 2. Bottom Right */
    .c2 { width: 220px; bottom: 10%; right: 2%; animation: float 7s ease-in-out infinite reverse; }
    
    /* 3. Bottom Left */
    .c3 { width: 180px; bottom: 10%; left: 5%; animation: sway 5s ease-in-out infinite; } 
    
    /* 4. Top Right (FIXED: Now Visible) */
    .c4 { width: 210px; top: 5%; right: 2%; display: block; animation: float 8s ease-in-out infinite; }

    @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-20px); } 100% { transform: translateY(0px); } }
    @keyframes sway  { 0% { transform: rotate(0deg) translateX(0); } 25% { transform: rotate(5deg) translateX(10px); } 75% { transform: rotate(-5deg) translateX(-10px); } 100% { transform: rotate(0deg) translateX(0); } }

    /* --- MOBILE POSITIONS --- */
    @media (max-width: 800px) {
      /* On mobile, we show 2 characters peeking from corners */
      .c1 { width: 110px; top: -10px; left: -10px; display: block; z-index: 100; }
      .c2 { width: 120px; bottom: -10px; right: -10px; top: auto; display: block; z-index: 100; }
      
      /* Hide middle/extra ones on mobile to keep form readable */
      .c3, .c4 { display: none; } 
    }

    /* =========================================
       üìÑ GLASS FORM CARD
       ========================================= */
    .box {
      background: rgba(255, 255, 255, 0.92);
      backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
      padding: 2.2rem; border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.25); 
      max-width: 550px; width: 100%;
      border: 1px solid rgba(255,255,255,0.6);
      animation: floatUp 0.6s ease-out; position: relative; z-index: 10; 
    }
    @keyframes floatUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    /* --- HEADER --- */
    .logo-area { text-align: center; margin-bottom: 1rem; }
    .logo-area img { height: 90px; width: auto; object-fit: contain; }

    h1 { 
      color: var(--jc-green); font-size: 1.8rem; margin-bottom: 0.5rem; 
      font-weight: 800; text-align: center; text-transform: uppercase; line-height: 1.2;
    }

    .event-info {
      background: #eef9f2; border-left: 5px solid var(--jc-green);
      border-radius: 8px; padding: 15px; margin-bottom: 25px;
      text-align: center; color: #1e5c33; font-size: 1rem; font-weight: 600;
    }

    /* --- FORM ELEMENTS --- */
    label { font-weight: 700; color: #444; display: block; margin-top: 1.2rem; font-size: 0.95rem; }
    .small-note { font-size: 0.8rem; color: #666; font-weight: 500; font-style: italic; }

    input, select {
      width: 100%; padding: 0 16px; height: 52px;
      border: 2px solid #e1e5e8; border-radius: 12px;
      font-size: 1rem; font-family: 'Nunito', sans-serif;
      transition: all 0.3s ease; background: #fdfdfd;
      -webkit-appearance: none; appearance: none;
    }
    input:focus, select:focus {
      outline: none; border-color: var(--jc-green);
      background: #fff; box-shadow: 0 4px 15px rgba(40, 120, 68, 0.1);
    }
    input[readonly] { 
      background-color: #f0f0f0 !important; color: #888; border-color: #eee;
      opacity: 1; -webkit-text-fill-color: #888; 
    }
    input[type="date"] { display: block; line-height: 52px; }

    /* --- CAR MSG --- */
    #carMsg {
      font-size: 0.95rem; margin-top: 10px; padding: 8px 12px;
      border-radius: 8px; font-weight: 700; text-align: center; display: none;
    }
    #carMsg.visible { display: block; animation: popIn 0.3s ease; }
    @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    /* --- BUTTONS --- */
    .btn {
      display: block; width: 100%; text-align: center; padding: 16px; margin-top: 30px;
      font-weight: 800; font-size: 1.2rem; border: none; border-radius: 50px; 
      cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
      text-decoration: none; letter-spacing: 0.5px; text-transform: uppercase;
      -webkit-appearance: none;
    }
    .btn-primary { 
      background: linear-gradient(135deg, var(--jc-green) 0%, var(--jc-green-light) 100%);
      color: #fff; box-shadow: 0 10px 20px rgba(40, 120, 68, 0.3);
    }
    .btn-primary:hover:not([disabled]) { transform: translateY(-2px); box-shadow: 0 15px 25px rgba(40, 120, 68, 0.4); }
    .btn-primary:disabled { background: #ccc; cursor: not-allowed; box-shadow: none; }

    .btn-secondary {
      background: #fff; border: 2px solid var(--jc-yellow); color: #333;
      margin-top: 15px; font-size: 1rem; font-weight: 700;
    }

    /* --- PAYMENT --- */
    .summary { margin-top: 25px; background: #fffdf5; border: 2px dashed #f0e6c5; border-radius: 16px; padding: 20px; }
    .qr-box {
      text-align: center; margin-top: 15px; padding: 15px; background: white;
      border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    .qr-box img { max-width: 100%; border-radius: 4px; }
    .hidden { display:none !important; }
    @media (max-width: 480px) { .box { padding: 1.5rem; } h1 { font-size: 1.5rem; } }
  </style>
</head>
<body>

  <div id="loader">
    <div class="loader-track">
      <img src="https://i.postimg.cc/Gm37HZVk/Cheetah_running_Copy.webp" class="running-char" alt="Runner">
    </div>
    <div class="loading-text">Loading Jungle Fun... ü¶Å</div>
  </div>

  <div class="jungle-scene">
     <img src="https://i.postimg.cc/P5f3PB9b/Monkey_climbing_cam2.webp" class="char c1" alt="Cub 1">
    <img src="https://i.postimg.cc/mgZXt0Jy/Yoga_poses_for_work_monkey.webp" class="char c2" alt="Cub 2">
    <img src="https://i.postimg.cc/Gm37HZVF/middle_split_monkey.webp" class="char c3" alt="Cub 3">
    <img src="https://i.postimg.cc/fRW2J6pj/Monkey_roll_01.webp" class="char c4" alt="Cub 4">
  </div>

  <div class="box">
    
    <div class="logo-area">
       <img src="https://junglecubsgyms.com/imgw/logo_light.png" alt="Jungle Cubs Gym">
    </div>

    <h1>Cubs Sports Fest üèÖ</h1>

    <div class="event-info">
      <div>üìÖ Sunday, March 08</div>
      <div>üìç V4 Turf, Bhandup</div>
      <div style="margin-top:4px; color:var(--jc-green); font-weight:800;">‚è∞ 9:30am to 11:30am (Morning Batch)</div>
    </div>

    <form id="regForm">
      
      <label>Parent Name üòá</label>
      <input type="text" name="Parent Name" id="parentName" placeholder="e.g. Worlds Best Parent" required>

      <label>Child Name üìù</label>
      <input type="text" name="ChildName" id="childName" placeholder="e.g. Super Cubs" required>

      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
        <div>
          <label>Child DOB üìÖ</label>
          <input type="date" name="ChildDOB" id="childDOB" required>
        </div>
        <div>
          <label>Child Age üìÜ</label>
          <input type="text" name="ChildAge" id="childAge" readonly placeholder="Auto-calc">
        </div>
      </div>

      <label>Select Your Centre üè´</label>
      <select name="Centre" id="centre" required>
        <option value="" disabled selected>-- Select Centre --</option>
        <option value="Matunga">Matunga</option>
        <option value="Hughes">Hughes</option>
        <option value="Malad">Malad</option>
        <option value="Borivali">Borivali</option>
        <option value="Lalbaug">Lalbaug</option>
        <option value="Worli">Worli</option>
        <option value="Bandra">Bandra</option>
      </select>

      <label>Mobile Number üì± (WhatsApp)</label>
      <input type="tel" name="Mobile" id="mobile" pattern="\d{10}" maxlength="10" placeholder="9812345678" required>

      <label>Membership Status</label>
      <select name="Status" id="status" required>
        <option value="In-house Parent" selected>In-house Parent ‚ù§Ô∏è</option>
        <option value="Outsider" disabled>Outsider - Event is exclusive for In-House Parents</option>
      </select>

      <label>Do you plan to get your private car üöó to the venue? 
        <span class="small-note">(Asking for Parking Reasons!)</span>
      </label>
      <select name="CarParking" id="carSelect" required>
        <option value="" disabled selected>-- Select Option --</option>
        <option value="No">No</option>
        <option value="Yes">Yes</option>
      </select>
      <div id="carMsg"></div>

      <div id="feeSection">
        <label>Event Fee Option</label>
        <select name="Fees Paid" id="feesPaid" required>
          <option value="" disabled selected>-- Select Option --</option>
          <option value="Complimentary Event">Complimentary Event üéâ - (Included in Fee Package)</option>
          <option value="Early Bird Price">Early Bird Price üòé - Pay ‚Çπ499</option>
        </select>
        <span class="small-note" id="feeNote">
          (We will check our records to confirm your complimentary event and you will be asked to make the payment if the records indicate otherwise)
        </span>
      </div>

      <input type="hidden" name="Payment Needed" id="paymentNeeded">
      <input type="hidden" name="Paid" value="No">
      <input type="hidden" name="Transaction Ref" id="txnRef">

      <div id="summaryWrap" class="summary hidden">
        <div id="paymentMsg" style="margin-bottom:10px; font-weight:600;"></div>
        
        <div id="paySection" class="hidden">
          <a id="upiBtn" href="#" class="btn btn-secondary" target="_blank">Pay ‚Çπ499 via UPI App</a>
          
          <div class="qr-box">
            <p style="font-weight:bold; color:var(--jc-green); margin-bottom:5px;">Scan to Pay ‚Çπ499</p>
            <img id="qrImg" src="" alt="QR Code">
          </div>

          <label style="display:flex; gap:12px; align-items:start; background:#fff; padding:12px; border-radius:8px; margin-top:20px; border:1px solid #ddd; cursor:pointer;">
            <input type="checkbox" id="paymentConfirmed" style="width:22px; height:22px; margin-top:2px; accent-color:var(--jc-green);">
            <span style="font-size:0.9rem; line-height:1.4;">I have made the payment and will share the screenshot on WhatsApp.</span>
          </label>
        </div>
      </div>

      <button type="button" id="submitBtn" class="btn btn-primary" disabled>Register & Send WhatsApp üöÄ</button>
    
    </form>
  </div>

<script>
  /* --- CONFIGURATION --- */
  const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyQucEMo_wCS6tvqwbb-lEKb95WYcsGcysbyULe-Gbe0UbBCLrPTskUC_tMsp7tm-OkAQ/exec'; 
  const UPI_ID = 'junglecubsgym7@oksbi';
  const WHATSAPP_NUMBER = '919326068804';
  const EVENT_NAME = "Cubs Sports Fest";
  
  const AMOUNT = "499"; 

  /* --- LOADER LOGIC --- */
  window.addEventListener('load', function() {
    const loader = document.getElementById('loader');
    loader.style.opacity = '0';
    setTimeout(() => {
      loader.style.display = 'none';
    }, 500);
  });

  /* --- ELEMENTS --- */
  const form = document.getElementById('regForm');
  const dobEl = document.getElementById('childDOB');
  const ageEl = document.getElementById('childAge');
  const feesPaidEl = document.getElementById('feesPaid');
  const paymentNeededEl = document.getElementById('paymentNeeded');
  const summaryWrap = document.getElementById('summaryWrap');
  const paySection = document.getElementById('paySection');
  const upiBtn = document.getElementById('upiBtn');
  const qrImg = document.getElementById('qrImg');
  const paymentConfirmed = document.getElementById('paymentConfirmed');
  const txnRef = document.getElementById('txnRef');
  const submitBtn = document.getElementById('submitBtn');
  const carSelect = document.getElementById('carSelect');
  const carMsg = document.getElementById('carMsg');

  /* --- LOGIC --- */
  
  // 1. Calculate Age
  dobEl.addEventListener('change', function() {
    if(!this.value) return;
    const dob = new Date(this.value);
    const today = new Date();
    let years = today.getFullYear() - dob.getFullYear();
    let months = today.getMonth() - dob.getMonth();
    if (months < 0 || (months === 0 && today.getDate() < dob.getDate())) {
      years--;
      months += 12;
    }
    if (today.getDate() < dob.getDate()) months--;
    if (months < 0) { months += 12; }
    ageEl.value = `${years} yrs ${months} mths`;
  });

  // 2. Mobile Number Filter
  document.getElementById('mobile').addEventListener('input', function(e) {
    this.value = this.value.replace(/\D/g,'').slice(0,10);
  });

  // 3. Car Parking Logic
  carSelect.addEventListener('change', function() {
    carMsg.className = "visible"; 
    if (this.value === 'No') {
      carMsg.innerText = "Appreciate it! May we suggest a Car-Pool/Uber? üöï";
      carMsg.style.color = "#155724"; 
      carMsg.style.backgroundColor = "#d4edda"; 
    } else if (this.value === 'Yes') {
      carMsg.innerText = "Please be mindful of the limited parking space at the venue! ü§î";
      carMsg.style.color = "#721c24";
      carMsg.style.backgroundColor = "#f8d7da";
    } else {
      carMsg.innerText = "";
      carMsg.className = "";
    }
  });

  // 4. Payment Logic with Popup
  function updateUI() {
    const feeOption = feesPaidEl.value;
    let needsPayment = 'Pending';

    if (feeOption === 'Complimentary Event') {
      needsPayment = 'No';
      alert("Our team will check records and revert with your Complimentary confirmation. Please continue registration and hit send on the Whatsapp messge!");
    } else if (feeOption === 'Early Bird Price') {
      needsPayment = 'Yes';
    }

    paymentNeededEl.value = needsPayment;

    if (needsPayment === 'Yes') {
      summaryWrap.classList.remove('hidden');
      paySection.classList.remove('hidden');
      
      const parent = document.getElementById('parentName').value || 'Parent';
      const tn = `Sports Fest for ${parent}`;
      const upiLink = `upi://pay?pa=${UPI_ID}&pn=JungleCubsGym&am=${AMOUNT}&cu=INR&tn=${encodeURIComponent(tn)}`;
      
      upiBtn.href = upiLink;
      upiBtn.textContent = `Pay ‚Çπ${AMOUNT} via UPI App`;
      qrImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(upiLink)}`;
      
      document.getElementById('paymentMsg').innerHTML = `<strong>Payment Required:</strong> Please pay <strong>‚Çπ${AMOUNT}</strong> to confirm your spot.`;
    
    } else if (needsPayment === 'No') {
      summaryWrap.classList.remove('hidden');
      paySection.classList.add('hidden');
      document.getElementById('paymentMsg').innerHTML = `<strong>Note:</strong> No payment required now. We will verify your complimentary status.`;
    } else {
      summaryWrap.classList.add('hidden');
    }

    validateForm();
  }

  feesPaidEl.addEventListener('change', updateUI);
  paymentConfirmed.addEventListener('change', validateForm);
  form.addEventListener('input', validateForm);

  function validateForm() {
    const isPaidNeeded = paymentNeededEl.value === 'Yes';
    const isConfirmed = paymentConfirmed.checked;
    const isValid = form.checkValidity();

    if (isValid) {
      if (isPaidNeeded && !isConfirmed) {
        submitBtn.disabled = true;
      } else {
        submitBtn.disabled = false;
      }
    } else {
      submitBtn.disabled = true;
    }
    txnRef.value = (isPaidNeeded && isConfirmed) ? "Screenshot via WhatsApp" : "";
  }

  /* --- SUBMIT HANDLER --- */
  submitBtn.addEventListener('click', function() {
    if (submitBtn.disabled) return;
    submitBtn.innerText = "Processing... ‚è≥";
    submitBtn.disabled = true;

    // --- Prepare Variables ---
    const pName = document.getElementById('parentName').value.trim();
    const cName = document.getElementById('childName').value.trim();
    const center = document.getElementById('centre').value;
    const status = feesPaidEl.options[feesPaidEl.selectedIndex].text; 
    
    let shortStatus = status;
    if(status.includes("Complimentary")) shortStatus = "Complimentary Event";
    if(status.includes("Early Bird")) shortStatus = "Early Bird";

    let msg = "";

    // --- Template 1: Complimentary ---
    if (paymentNeededEl.value === 'No') {
msg = `üéñÔ∏è*Jungle Cubs Gym*üéñÔ∏è
*Cubs Sports Fest Registration* üèÖ

üë§ Parent: *${pName}*
üë∂ Child: *${cName}*
üìç Centre: *${center}*
üéü Option selected: ${shortStatus}
üí∞ Payment: *Not required (Subject to verification)*

Thank you ${pName} for registering ${cName} for the Cubs Sports Fest üèÜ
We are excited to see ${cName} on the turf!

---------------------------------------------
Follow us on Instagram: 
https://instagram.com/junglecubsgym`;
    } 
    
    // --- Template 2: Paid (Early Bird) ---
    else {
msg = `üéñÔ∏è*Jungle Cubs Gym*üéñÔ∏è
*Cubs Sports Fest Registration* üèÖ

üë§ Parent: *${pName}*
üë∂ Child: *${cName}*
üìç Centre: *${center}*
üéü Option selected: ${shortStatus}
üí∞ Payment: *${AMOUNT}‚Çπ (Subject to verification)*

Thank you ${pName} for registering ${cName} for the Cubs Sports Fest üèÜ
We are excited to see ${cName} on the turf!

---------------------------------------------
Follow us on Instagram: 
https://instagram.com/junglecubsgym`;
    }

    // --- Send to WhatsApp ---
    const waURL = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;
    window.open(waURL, '_blank');

    // --- Submit to Google Sheet ---
    const formData = new FormData(form);
    fetch(SCRIPT_URL, { method: 'POST', body: formData })
      .then(response => {
         setTimeout(() => {
             alert("Registration Successful!");
             location.reload(); 
         }, 1000);
      })
      .catch(error => {
         console.error('Error!', error.message);
         location.reload();
      });
  });

</script>

</body>
</html>